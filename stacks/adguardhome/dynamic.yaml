tcp:
  routers:
    # OpenAI / ChatGPT
    chatgpt:
      entryPoints:
      - https
      rule: "HostSNI(`chatgpt.com`) || HostSNIRegexp(`^.+\\.chatgpt\\.com$`)"
      service: chatgpt
      tls:
        passthrough: true
      priority: 10

    openai:
      entryPoints:
      - https
      rule: "HostSNI(`openai.com`) || HostSNI(`api.openai.com`) || HostSNI(`auth.openai.com`) || HostSNI(`platform.openai.com`) || HostSNIRegexp(`^.+\\.openai\\.com$`)"
      service: openai
      tls:
        passthrough: true
      priority: 10

    sora:
      entryPoints:
      - https
      rule: "HostSNI(`sora.com`) || HostSNIRegexp(`^.+\\.sora\\.com$`)"
      service: sora
      tls:
        passthrough: true
      priority: 10

    # OpenAI static assets
    oaistatic:
      entryPoints:
      - https
      rule: "HostSNI(`oaistatic.com`) || HostSNIRegexp(`^.+\\.oaistatic\\.com$`)"
      service: oaistatic
      tls:
        passthrough: true
      priority: 10

    oaiusercontent:
      entryPoints:
      - https
      rule: "HostSNI(`oaiusercontent.com`) || HostSNIRegexp(`^.+\\.oaiusercontent\\.com$`)"
      service: oaiusercontent
      tls:
        passthrough: true
      priority: 10

    # Auth
    auth0:
      entryPoints:
      - https
      rule: "HostSNI(`auth0.com`) || HostSNIRegexp(`^.+\\.auth0\\.com$`)"
      service: auth0
      tls:
        passthrough: true
      priority: 10

    # Microsoft
    microsoft:
      entryPoints:
      - https
      rule: "HostSNI(`microsoft.com`) || HostSNIRegexp(`^.+\\.microsoft\\.com$`)"
      service: microsoft
      tls:
        passthrough: true
      priority: 10

    bing:
      entryPoints:
      - https
      rule: "HostSNI(`bing.com`) || HostSNIRegexp(`^.+\\.bing\\.com$`)"
      service: bing
      tls:
        passthrough: true
      priority: 10

    # GitHub
    github:
      entryPoints:
      - https
      rule: "HostSNI(`github.com`) || HostSNIRegexp(`^.+\\.github\\.com$`)"
      service: github
      tls:
        passthrough: true
      priority: 10

    githubcopilot:
      entryPoints:
      - https
      rule: "HostSNI(`githubcopilot.com`) || HostSNIRegexp(`^.+\\.githubcopilot\\.com$`)"
      service: githubcopilot
      tls:
        passthrough: true
      priority: 10

    # Default fallback
    default:
      entryPoints:
      - https
      rule: "HostSNI(`*`)"
      service: direct
      tls:
        passthrough: true
      priority: 1

  services:
    chatgpt:
      loadBalancer:
        servers:
        - address: "chatgpt.com:443"
    openai:
      loadBalancer:
        servers:
        - address: "openai.com:443"
    sora:
      loadBalancer:
        servers:
        - address: "sora.com:443"
    oaistatic:
      loadBalancer:
        servers:
        - address: "oaistatic.com:443"
    oaiusercontent:
      loadBalancer:
        servers:
        - address: "oaiusercontent.com:443"
    auth0:
      loadBalancer:
        servers:
        - address: "auth0.com:443"
    microsoft:
      loadBalancer:
        servers:
        - address: "microsoft.com:443"
    bing:
      loadBalancer:
        servers:
        - address: "bing.com:443"
    github:
      loadBalancer:
        servers:
        - address: "github.com:443"
    githubcopilot:
      loadBalancer:
        servers:
        - address: "githubcopilot.com:443"
    direct:
      loadBalancer:
        servers:
        - address: "1.1.1.1:443"
